<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>LOTO Generator | Reports</title>
<link rel="stylesheet" href="/static/css/pdf_list.css">
<link rel="icon" type="image/x-icon" href="/static/includes/list_icon.svg">
</head>
<body>
<header>
    <h1>Available PDF Reports</h1>

    {% if current_user %}
        <p class="current-user">
            Logged in as: {{ current_user.username }} ({{ current_user.role | capitalize }})
        </p>
    {% endif %}

    {% if current_user and current_user.role == "owner" %}
        <div class="left-div">
            <a href="/users" class="back-btn">Users</a>
            <a href="/audit_logs" class="back-btn">Logs</a>
            <a href="/map" class="back-btn">Map</a>
        </div>
    {% endif %}

    <div class="right-div">
        <a id="createReportBtn" href="{{ url_for('create_report') }}" class="add-btn" title="Create New Report">+ Create Report</a>
        <a id="selectModeBtn" class="add-btn">Select</a>
        <a id="generateSelectedBtn" class="add-btn" style="display:none;">Generate</a>
        <a href="#" class="add-btn" id="logout-btn">Logout</a>
    </div>
</header>

<main>
    <div id="reportList" class="report-list">
        <!-- JS populates report cards here -->
    </div>

    <!-- Pagination controls -->
    <div id="paginationBar" class="pagination-bar">
        <div class="per-page">
            <label for="perPageSelect">Per Page:</label>
            <select id="perPageSelect">
                <option value="10">10</option>
                <option value="25" selected>25</option>
                <option value="50">50</option>
                <option value="100">100</option>
            </select>
        </div>

        <div class="nav">
            <button id="prevBtn" class="page-btn">← Prev</button>
            <span id="pageInfo" class="page-info">Page 1 of 1</span>
            <button id="nextBtn" class="page-btn">Next →</button>
        </div>

        <div class="jump">
            <label for="jumpPageInput">Go to</label>
            <input id="jumpPageInput" type="text" inputmode="numeric" pattern="[0-9]*" />
            <button id="jumpPageBtn" class="page-btn">Go</button>
        </div>
    </div>

    <div id="paginationInfo" class="pagination-info" aria-live="polite"></div>
</main>

<!-- Confirmation Modal -->
<div id="confirmModal" class="modal">
    <div id="confirmBox" class="modal-box" role="dialog" aria-modal="true" aria-labelledby="confirmText">
        <p id="confirmText"></p>
        <div class="modal-actions">
            <button id="confirmYes" class="modal-yes">Yes</button>
            <button id="confirmNo" class="modal-no">Cancel</button>
        </div>
    </div>
</div>

<!-- PDF Generation Loading Popup (Matches Map Popup) -->
<div id="pdfGeneratingOverlay" class="map-loading-overlay hidden-overlay">
    <div class="map-loading-content">
        <div class="spinner">
            <svg width="60" height="60" viewBox="0 0 50 50">
                <circle cx="25" cy="25" r="20" fill="none" stroke="#C32026" 
                    stroke-width="5" stroke-linecap="round"
                    stroke-dasharray="31.4 31.4" transform="rotate(0 25 25)">
                    <animateTransform attributeName="transform" attributeType="XML"
                        type="rotate" from="0 25 25" to="360 25 25"
                        dur="1s" repeatCount="indefinite"/>
                </circle>
            </svg>
        </div>
        <p>Generating Reports…</p>
    </div>
</div>

<!-- Selected Reports Count Popup -->
<div id="selectedCountPopup" class="selected-count-popup hidden-popup">
    0 reports selected
</div>

<script type="module" src="/static/js/pdf_list.js"></script>
</body>
</html>
